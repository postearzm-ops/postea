# .env.railway.updated - Variables completas para Railway
# Sistema con LinkedIn, Twitter/X y aprobación por Telegram

# =============================================================================
# CONFIGURACIÓN DE RAILWAY
# =============================================================================

NODE_ENV=production
PORT=3000

# Frontend URL - Actualizar después del deploy
FRONTEND_URL=https://tu-app-frontend.up.railway.app

# =============================================================================
# BASE DE DATOS Y CACHE
# =============================================================================
# Railway configura automáticamente:
# DATABASE_URL=${{Postgres.DATABASE_URL}}
# REDIS_URL=${{Redis.REDIS_URL}}

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
# Genera con: openssl rand -base64 32
JWT_SECRET=GENERA_UN_STRING_ALEATORIO_SEGURO_AQUI_MIN_32_CHARS
JWT_EXPIRY=7d
REFRESH_TOKEN_EXPIRY=30d

# =============================================================================
# LINKEDIN OAUTH 2.0
# =============================================================================
# Obtener en: https://www.linkedin.com/developers/apps
LINKEDIN_CLIENT_ID=tu_linkedin_client_id
LINKEDIN_CLIENT_SECRET=tu_linkedin_client_secret
LINKEDIN_REDIRECT_URI=https://tu-app-backend.up.railway.app/auth/linkedin/callback

# =============================================================================
# TWITTER/X OAUTH 2.0
# =============================================================================
# Obtener en: https://developer.twitter.com/en/portal/dashboard
# Documentación completa en: TWITTER_SETUP.md

TWITTER_CLIENT_ID=tu_twitter_client_id
TWITTER_CLIENT_SECRET=tu_twitter_client_secret
TWITTER_REDIRECT_URI=https://tu-app-backend.up.railway.app/auth/twitter/callback

# =============================================================================
# TELEGRAM BOT
# =============================================================================
# Crear bot con @BotFather en Telegram
# Documentación completa en: TELEGRAM_SETUP.md

# Token del bot (obtenido de @BotFather)
TELEGRAM_BOT_TOKEN=6234567890:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw

# URL del webhook (se configura automáticamente)
TELEGRAM_WEBHOOK_URL=https://tu-app-backend.up.railway.app/api/telegram/webhook

# Tiempo de expiración de aprobaciones (en horas)
APPROVAL_TIMEOUT_HOURS=24

# Auto-publicar si no hay respuesta en el timeout (true/false)
AUTO_PUBLISH_ON_TIMEOUT=false

# =============================================================================
# NEWS APIs (GRATIS)
# =============================================================================

# NewsAPI.org - https://newsapi.org/register
# Tier gratuito: 100 requests/día
NEWSAPI_KEY=tu_newsapi_key

# GNews API - https://gnews.io/register  
# Tier gratuito: 100 requests/día
GNEWS_KEY=tu_gnews_key

# =============================================================================
# LLM CONFIGURATION - GROQ (GRATIS)
# =============================================================================
# Groq: https://console.groq.com
# Tier gratuito: 30 req/min, 14,400/día - GRATIS PERMANENTEMENTE

LLM_PROVIDER=groq
GROQ_API_KEY=tu_groq_api_key

# Modelos disponibles (todos gratis):
# - llama-3.1-70b-versatile (RECOMENDADO - más capaz)
# - llama-3.1-8b-instant (más rápido)
# - mixtral-8x7b-32768 (buen balance)
# - gemma2-9b-it
LLM_MODEL=llama-3.1-70b-versatile

# =============================================================================
# SCHEDULER CONFIGURATION (CRON JOBS)
# =============================================================================
# Formato Cron: minute hour day month weekday

# Buscar noticias cada 4 horas
FETCH_NEWS_CRON=0 */4 * * *

# Analizar noticias y generar posts cada 6 horas
ANALYZE_NEWS_CRON=0 */6 * * *

# Publicar posts aprobados (cada hora)
PUBLISH_POSTS_CRON=0 * * * *

# =============================================================================
# CARACTERÍSTICAS Y LÍMITES
# =============================================================================

# Auto-publicar sin aprobación (si false, TODOS van a Telegram)
DEFAULT_AUTO_PUBLISH=false

# Máximo de posts por día por usuario
MAX_POSTS_PER_DAY=10

# Máximo de tópicos por usuario
MAX_TOPICS_PER_USER=20

# Días de retención de noticias
NEWS_RETENTION_DAYS=30

# Límite de caracteres para Twitter
MAX_TWEET_LENGTH=280

# =============================================================================
# EMAIL NOTIFICATIONS (OPCIONAL)
# =============================================================================

# Habilitar notificaciones por email
ENABLE_EMAIL_NOTIFICATIONS=false

# Configuración SMTP (Gmail example)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=tu_email@gmail.com
SMTP_PASSWORD=tu_app_password_gmail
EMAIL_FROM=noreply@tudominio.com

# =============================================================================
# RATE LIMITING
# =============================================================================

# Ventana de tiempo (15 minutos)
RATE_LIMIT_WINDOW_MS=900000

# Máximo requests por ventana
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# LOGGING Y MONITORING
# =============================================================================

# Nivel de logs: debug, info, warn, error
LOG_LEVEL=info

# Path para logs
LOG_FILE_PATH=/tmp/logs

# =============================================================================
# SECURITY
# =============================================================================

# Rounds de bcrypt
BCRYPT_ROUNDS=10

# CORS Origin
CORS_ORIGIN=https://tu-app-frontend.up.railway.app

# =============================================================================
# PLATFORM FEATURES
# =============================================================================

# Habilitar LinkedIn
ENABLE_LINKEDIN=true

# Habilitar Twitter
ENABLE_TWITTER=true

# Habilitar aprobación por Telegram
ENABLE_TELEGRAM_APPROVAL=true

# Habilitar analytics
ENABLE_ANALYTICS=true

# Habilitar generación automática de posts
ENABLE_AUTO_GENERATION=true

# =============================================================================
# NOTAS IMPORTANTES
# =============================================================================

# 1. DATABASE_URL y REDIS_URL se configuran automáticamente en Railway
# 2. Actualiza todas las URLs después del primer deploy
# 3. Obtén TELEGRAM_BOT_TOKEN de @BotFather en Telegram
# 4. Obtén TWITTER_CLIENT_ID en developer.twitter.com
# 5. Obtén LINKEDIN_CLIENT_ID en linkedin.com/developers
# 6. Obtén GROQ_API_KEY en console.groq.com (GRATIS)
# 7. Todos los servicios de API son gratuitos

# =============================================================================
# QUICK START
# =============================================================================

# Mínimo necesario para arrancar:
# 1. GROQ_API_KEY (para generar posts)
# 2. TELEGRAM_BOT_TOKEN (para aprobaciones)
# 3. NEWSAPI_KEY o GNEWS_KEY (para noticias)
# 4. LINKEDIN_CLIENT_ID + SECRET (para publicar en LinkedIn)
# 5. TWITTER_CLIENT_ID + SECRET (para publicar en Twitter)

# Opcionales:
# - Email notifications (si quieres notificaciones por correo)
# - Auto-publish (si NO quieres usar Telegram para aprobar)

# =============================================================================
# TESTING
# =============================================================================

# Endpoints de prueba:
# GET  /health                    - Health check general
# GET  /api/telegram/health       - Estado del bot de Telegram
# POST /api/telegram/test-message - Enviar mensaje de prueba
# GET  /api/twitter/health        - Estado de conexión Twitter
# GET  /health/detailed           - Health check detallado

# =============================================================================
# DOCUMENTACIÓN
# =============================================================================

# README.md                - Guía general
# RAILWAY_DEPLOYMENT.md    - Deploy en Railway
# QUICK_START_RAILWAY.md   - Inicio rápido
# TELEGRAM_SETUP.md        - Configuración de Telegram
# TWITTER_SETUP.md         - Configuración de Twitter
